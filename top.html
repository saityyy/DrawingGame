<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>drawing</title>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div class="center">
      <img src="img/DrawingGameLogo.png" class="logo" />
      <div class="account">
        <div class="login"></div>
        <div class="newac"></div>
      </div>
      <div class="RealTimeNum"></div>
      <h1>選択</h1>
      <br />
      <img src="img/compass2.png" /> 　　
      <img src="img/ruler2.png" />
    </div>
    <form action="backend/matching.php" method="GET">
      <div class="mode0">
        <input type="radio" name="mode" value="0" />
        <label for="0">コンパス</label>
      </div>
      <div class="mode1">
        <input type="radio" name="mode" value="1" checked />
        <label for="1">定規</label>
      </div>
      <br />
      <div class="center">
        <input type="submit" value="マッチング開始" class="button" />
      </div>
    </form>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      //responseData=["name"(not login->0),"registNum","playNum","waitMatchingNum"];
      var name;
      var registNum;
      var playNum;
      var waitMatchingNum;
      var xhr = new XMLHttpRequest();
      xhr.open("GET", "backend/top.php", true);
      xhr.responseType = "json";
      xhr.send();
      xhr.onreadystatechange = function () {
        if (xhr.status == 200 && xhr.readyState == 4) {
          var res = xhr.response;
          console.log(res);
          name = res["name"];
          registNum = res["registNum"];
          playNum = res["playNum"];
          waitMatchingNum = res["waitMatchingNum"];
          if (name == 0)
            $(".login").html('<a href="login_form.html">ログイン</a>');
          else $(".login").append("<h2>ようこそ" + name + "さん!!</h2>");
          $(".login").append(
            '<p><a href="backend/logout.php">ログアウト</a></p>'
          );
          $(".newac").append(
            '<p><a href="newac_form.html">新規アカウント</a></p>'
          );
        }
      };
    </script>
  </body>
</html>
